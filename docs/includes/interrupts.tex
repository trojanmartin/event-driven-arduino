\section{Prerušenia}
\noindent Vo vstavaných systémoch prerušenie upozorní procesor na udalosť, ktorá nastala a je potrebné, aby jej procesor venoval pozornosť. Často ide o signály vygenerované perifériami procesora. Procesor na prerušenie zareaguje pozastavením vykonávania aktuálnej aktivity, uložením jej stavu a začatím vykonávania kódu na inej pamäťovej adrese \cite{wangAutomaticDetectionValidation2017}. \par 
Táto adresa je definovaná v takzvanom \textit{vektore prerušení} (interrupt vector). \textit{Vektor prerušení} je konfiguravateľné alebo pevne dané miesto v pamäti, ktoré špecifikuje adresu, kde má procesor pokračovať vo vykonávaní kódu. Každé podporované prerušenie sa musí nachádzať v tomto vektore. Blok pamäte kam odkazuje vektor prerušení, sa nazýva \textit{obsluha prerušenia}. V anglickej literatúre sa používa výraz \textit{interrupt service routine} \textit{(ISR)}, preto aj my budeme ďalej používať skratku  ISR. Po vykonaní  ISR sa procesor vráti k predtým vykonávanej aktivite. \par
\textit{Radič prerušení} je periférne zariadenie, ktoré spravuje prerušenia pre procesor. Niektoré architektúry procesorov majú integrovaný sofistikovaný radič prerušení (napríklad AVR alebo MSP430), zatiaľ čo iné obsahujú iba základný ovládač, ktorý si vyžaduje ďalší externý radič prerušení (napríklad ARM alebo x86). \par
Prerušenie je v stave \textit{čakania}, ak daná udalosť nastala a radič prerušení dané prerušenie zaregistroval, avšak ešte sa nezačalo vykonávanie ISR.  O \textit{zmeškanom prerušení} hovoríme, keď udalosť prerušenia nastala, ale radič prerušení sa o tom nedozvedel. Toto väčšinov nastáva v situácii, keď je prerušenie v stave čakania a udalosť nastane znova. \par
Prerušenie je \textit{zakázané}, keď je na hardvérovej úrovni zabránené spusteniu prerušenia. Vo všeobecnosti, väčšina prerušení má svoj dedikovaný bit v hardvérových registroch, ktorý povoľuje, respektíve zakazuje vykonanie prerušenia. Na väčšine procesorov je taktiež možné vypnúť všetky prerušenia vynulovaním bitu, ktorý globálne zakazuje/povoľuje prerušenia. Tento bit sa nazýva aj \textit{master interrupt enable bit}.\par 
Prerušenie nastane pri splnení nasledujúcich podmienok:
\begin{enumerate}
    \item Master interrupt enable bit je nastavený.
    \item Dedikovaný bit prerušenia je nastavený.
    \item Prerušenie je v stave čakania.
    \item Procesor sa nachádza v stave medzi vykonaním dvoch inštrukcií alebo vykonáva inštrukciu, ktorú je možné prerušiť.
    \item Nenastalo žiadne prerušenie, ktoré splnilo podmienky 1-4 a má vyššiu prioritu.
\end{enumerate} \par

\textit{Latencia} prerušenia je časový interval od momentu kedy boli splnené podmienky vykonania prerušenia až po chvíľu začatia vykonávania ISR daného prerušenia. Ak sa objaví ďalšie prerušenie s vyššou prioritou, latencia prerušenia s nižšou prioritou môže byť veľká. K dĺžke latencie prispievajú aj vyššie spomínané podmienky vykonania prerušenia, keďže kontrola či sú bity nastavené alebo dokončenie vykonávania aktuálnej inštrukcie procesorom trvá nejaký čas. \par
Veľká väčšina procesorov podporuje aj prerušenia, ktoré nie je môžné vypnúť (non-maskable interrupt - NMI). Používajú sa v prípade nastania fatálnych chýb z, ktorých nie je možné žiadnym spôsobom vykonať nápravu programu
\cite{regehrSafeStructuredUse2007}. \par
Prerušenia je možné vnímať aj ako udalosti. Pri ich využívaní v programe je preto možné hovoriť o programovaní pomocou udalosťami riadenej paradigmy. Takýto program je možné označiť ako \begin{math}P=Task || ISR\end{math}, kde \begin{math}Task\end{math} je hlavný program pozostávajúci z jednej alebo viacerých úloh (vlákien) a  \begin{math}ISR\end{math} kde \begin{math}ISR=ISR_1||ISR_2||ISR_3||..||ISR_N\end{math} sú obsluhy prerušení.
Indexy daných \begin{math}ISR\end{math} predstavujú číslo prerušenia. Čím je číslo väčšie, tým menšiu prioritu dané prerušenie má \cite{wangAutomaticDetectionValidation2017}. \par Prerušenia sú väčšinovo využívané na indikovanie dvoch typov udalostí. Prvou je udalosť vykonaná používateľom, kde patrí napríklad stlačenie tlačidla. Druhou je prijatie dát z periferného zariadenia. Ako príklad môžeme uviesť UART protokol \cite{wangAutomaticDetectionValidation2017}.